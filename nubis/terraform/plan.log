Refreshing Terraform state prior to plan...


The Terraform execution plan has been generated and is shown below.
Resources are shown in alphabetical order for quick scanning. Green resources
will be created (or destroyed and then created if an existing resource
exists), yellow resources are being changed in-place, and red resources
will be destroyed.

Note: You didn't specify an "-out" parameter to save this plan, so when
"apply" is called, Terraform can't guarantee this is what will execute.

[32m+ consul_keys.config
[0m    datacenter:              "" => "<computed>"
    key.#:                   "" => "15"
    key.1300834026.default:  "" => ""
    key.1300834026.delete:   "" => "true"
    key.1300834026.name:     "" => "db_password"
    key.1300834026.path:     "" => "bugzilla-stage/stage/config/DBpassword"
    key.1300834026.value:    "" => "${coalesce(var.password,template_file.password.rendered)}"
    key.1923855529.default:  "" => ""
    key.1923855529.delete:   "" => "true"
    key.1923855529.name:     "" => "db_username"
    key.1923855529.path:     "" => "bugzilla-stage/stage/config/DBuser"
    key.1923855529.value:    "" => "admin"
    key.2020579232.default:  "" => ""
    key.2020579232.delete:   "" => "true"
    key.2020579232.name:     "" => "active"
    key.2020579232.path:     "" => "bugzilla-stage/stage/config/Active"
    key.2020579232.value:    "" => "<computed>"
    key.2861004715.default:  "" => ""
    key.2861004715.delete:   "" => "true"
    key.2861004715.name:     "" => "db_name"
    key.2861004715.path:     "" => "bugzilla-stage/stage/config/DBname"
    key.2861004715.value:    "" => "bugzilla"
    key.2933361171.default:  "" => ""
    key.2933361171.delete:   "" => "true"
    key.2933361171.name:     "" => "smtp_host"
    key.2933361171.path:     "" => "bugzilla-stage/stage/config/SMTP/SESServer"
    key.2933361171.value:    "" => "email-smtp.us-west-2.amazonaws.com"
    key.3147223414.default:  "" => ""
    key.3147223414.delete:   "" => "true"
    key.3147223414.name:     "" => "shadowdb_name"
    key.3147223414.path:     "" => "bugzilla-stage/stage/config/ShadowDBname"
    key.3147223414.value:    "" => "bugzilla"
    key.~1260982014.default: "" => ""
    key.~1260982014.delete:  "" => "true"
    key.~1260982014.name:    "" => "smtp_password"
    key.~1260982014.path:    "" => "bugzilla-stage/stage/config/SMTP/SESPassword"
    key.~1260982014.value:   "" => "${module.mail.secret}"
    key.~1880965260.default: "" => ""
    key.~1880965260.delete:  "" => "true"
    key.~1880965260.name:    "" => "shadowdb_server"
    key.~1880965260.path:    "" => "bugzilla-stage/stage/config/ShadowDBHost"
    key.~1880965260.value:   "" => "${element(split(\",\",module.database.replicas),0)}"
    key.~1927332006.default: "" => ""
    key.~1927332006.delete:  "" => "true"
    key.~1927332006.name:    "" => "attachments_bucket"
    key.~1927332006.path:    "" => "bugzilla-stage/stage/config/S3AttachmentsBucket"
    key.~1927332006.value:   "" => "${module.attachments.name}"
    key.~2446992140.default: "" => ""
    key.~2446992140.delete:  "" => "true"
    key.~2446992140.name:    "" => "canonical_server"
    key.~2446992140.path:    "" => "bugzilla-stage/stage/config/CanonicalServer"
    key.~2446992140.value:   "" => "https://${module.dns.fqdn}/"
    key.~2652949437.default: "" => ""
    key.~2652949437.delete:  "" => "true"
    key.~2652949437.name:    "" => "data_bucket"
    key.~2652949437.path:    "" => "bugzilla-stage/stage/config/S3DataBucket"
    key.~2652949437.value:   "" => "${module.data.name}"
    key.~2978184562.default: "" => ""
    key.~2978184562.delete:  "" => "true"
    key.~2978184562.name:    "" => "smtp_user"
    key.~2978184562.path:    "" => "bugzilla-stage/stage/config/SMTP/SESUser"
    key.~2978184562.value:   "" => "${module.mail.smtp_user}"
    key.~450207833.default:  "" => ""
    key.~450207833.delete:   "" => "true"
    key.~450207833.name:     "" => "cache_endpoint"
    key.~450207833.path:     "" => "bugzilla-stage/stage/config/MemCachedEndpoint"
    key.~450207833.value:    "" => "${module.cache.endpoint_host}"
    key.~632203382.default:  "" => ""
    key.~632203382.delete:   "" => "true"
    key.~632203382.name:     "" => "db_server"
    key.~632203382.path:     "" => "bugzilla-stage/stage/config/DBserver"
    key.~632203382.value:    "" => "${module.database.address}"
    key.~842207840.default:  "" => ""
    key.~842207840.delete:   "" => "true"
    key.~842207840.name:     "" => "cache_port"
    key.~842207840.path:     "" => "bugzilla-stage/stage/config/MemCachedPort"
    key.~842207840.value:    "" => "${module.cache.endpoint_port}"
    var.#:                   "" => "<computed>"
[0m
[0m[32m+ module.attachments.aws_iam_role_policy.bucket
[0m    name:   "" => "bugzilla-stage-attachments-bucket-policy"
    policy: "" => "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n  {\n  \"Effect\": \"Allow\",\n  \"Action\": \"s3:ListAllMyBuckets\",\n  \"Resource\": \"arn:aws:s3:::*\"\n   },\n   {\n   \"Effect\": \"Allow\",\n    \"Action\": [\n    \"s3:ListBucket\"\n        ],\n    \"Resource\": \"${aws_s3_bucket.bucket.arn}\"\n    },\n            {\n              \"Effect\": \"Allow\",\n              \"Action\": [\n                \"s3:PutObject\",\n                \"s3:GetObject\",\n                \"s3:DeleteObject\"\n              ],\n              \"Resource\": \"${aws_s3_bucket.bucket.arn}/*\"\n             }\n\n  ]\n}\n"
    role:   "" => "bugzilla-stage-us-west-2-webserver-role"
[0m
[0m[32m+ module.attachments.aws_s3_bucket.bucket
[0m    acl:                         "" => "private"
    arn:                         "" => "<computed>"
    bucket:                      "" => "${replace(template_file.random.rendered,\"/^(.{63}).*/\",\"$1\")}"
    force_destroy:               "" => "true"
    hosted_zone_id:              "" => "<computed>"
    region:                      "" => "<computed>"
    tags.#:                      "" => "4"
    tags.Environment:            "" => "stage"
    tags.Name:                   "" => "bugzilla-stage-attachments"
    tags.Region:                 "" => "us-west-2"
    tags.TechnicalOwner:         "" => "infra-aws@mozilla.com"
    versioning.#:                "" => "1"
    versioning.69840937.enabled: "" => "true"
    website_domain:              "" => "<computed>"
    website_endpoint:            "" => "<computed>"
[0m
[0m[32m+ module.attachments.template_file.random
[0m    rendered: "" => "<computed>"
    template: "" => "${bucket}-${random40}"
    vars.#:   "" => "<computed>"
[0m
[0m[32m+ module.attachments.tls_private_key.random
[0m    algorithm:          "" => "ECDSA"
    ecdsa_curve:        "" => "P224"
    private_key_pem:    "" => "<computed>"
    public_key_openssh: "" => "<computed>"
    public_key_pem:     "" => "<computed>"
    rsa_bits:           "" => "2048"
[0m
[0m[32m+ module.data.aws_iam_role_policy.bucket
[0m    name:   "" => "bugzilla-stage-data-bucket-policy"
    policy: "" => "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n  {\n  \"Effect\": \"Allow\",\n  \"Action\": \"s3:ListAllMyBuckets\",\n  \"Resource\": \"arn:aws:s3:::*\"\n   },\n   {\n   \"Effect\": \"Allow\",\n    \"Action\": [\n    \"s3:ListBucket\"\n        ],\n    \"Resource\": \"${aws_s3_bucket.bucket.arn}\"\n    },\n            {\n              \"Effect\": \"Allow\",\n              \"Action\": [\n                \"s3:PutObject\",\n                \"s3:GetObject\",\n                \"s3:DeleteObject\"\n              ],\n              \"Resource\": \"${aws_s3_bucket.bucket.arn}/*\"\n             }\n\n  ]\n}\n"
    role:   "" => "bugzilla-stage-us-west-2-webserver-role"
[0m
[0m[32m+ module.data.aws_s3_bucket.bucket
[0m    acl:                         "" => "private"
    arn:                         "" => "<computed>"
    bucket:                      "" => "${replace(template_file.random.rendered,\"/^(.{63}).*/\",\"$1\")}"
    force_destroy:               "" => "true"
    hosted_zone_id:              "" => "<computed>"
    region:                      "" => "<computed>"
    tags.#:                      "" => "4"
    tags.Environment:            "" => "stage"
    tags.Name:                   "" => "bugzilla-stage-data"
    tags.Region:                 "" => "us-west-2"
    tags.TechnicalOwner:         "" => "infra-aws@mozilla.com"
    versioning.#:                "" => "1"
    versioning.69840937.enabled: "" => "true"
    website_domain:              "" => "<computed>"
    website_endpoint:            "" => "<computed>"
[0m
[0m[32m+ module.data.template_file.random
[0m    rendered: "" => "<computed>"
    template: "" => "${bucket}-${random40}"
    vars.#:   "" => "<computed>"
[0m
[0m[32m+ module.data.tls_private_key.random
[0m    algorithm:          "" => "ECDSA"
    ecdsa_curve:        "" => "P224"
    private_key_pem:    "" => "<computed>"
    public_key_openssh: "" => "<computed>"
    public_key_pem:     "" => "<computed>"
    rsa_bits:           "" => "2048"
[0m
[0m[32m+ module.database.aws_db_instance.database
[0m    address:                    "" => "<computed>"
    allocated_storage:          "" => "64"
    apply_immediately:          "" => "true"
    arn:                        "" => "<computed>"
    auto_minor_version_upgrade: "" => "true"
    availability_zone:          "" => "<computed>"
    backup_retention_period:    "" => "7"
    backup_window:              "" => "<computed>"
    copy_tags_to_snapshot:      "" => "false"
    db_subnet_group_name:       "" => "bugzilla-stage-rds-subnet-group"
    endpoint:                   "" => "<computed>"
    engine:                     "" => "mysql"
    engine_version:             "" => "<computed>"
    identifier:                 "" => "bugzilla-stage"
    instance_class:             "" => "db.t1.micro"
    license_model:              "" => "<computed>"
    maintenance_window:         "" => "<computed>"
    monitoring_interval:        "" => "0"
    monitoring_role_arn:        "" => "<computed>"
    multi_az:                   "" => "true"
    name:                       "" => "bugzilla"
    option_group_name:          "" => "<computed>"
    parameter_group_name:       "" => "<computed>"
    password:                   "" => "${coalesce(var.password,template_file.password.rendered)}"
    port:                       "" => "<computed>"
    publicly_accessible:        "" => "<computed>"
    replicas.#:                 "" => "<computed>"
    skip_final_snapshot:        "" => "true"
    status:                     "" => "<computed>"
    storage_type:               "" => "gp2"
    tags.#:                     "" => "3"
    tags.Environment:           "" => "stage"
    tags.Region:                "" => "us-west-2"
    tags.TechnicalOwner:        "" => "infra-aws@mozilla.com"
    username:                   "" => "admin"
    vpc_security_group_ids.#:   "" => "<computed>"
[0m
[0m[32m+ module.database.aws_db_instance.replica
[0m    address:                    "" => "<computed>"
    allocated_storage:          "" => "<computed>"
    apply_immediately:          "" => "<computed>"
    arn:                        "" => "<computed>"
    auto_minor_version_upgrade: "" => "true"
    availability_zone:          "" => "<computed>"
    backup_retention_period:    "" => "<computed>"
    backup_window:              "" => "<computed>"
    copy_tags_to_snapshot:      "" => "false"
    db_subnet_group_name:       "" => "<computed>"
    endpoint:                   "" => "<computed>"
    engine:                     "" => "<computed>"
    engine_version:             "" => "<computed>"
    identifier:                 "" => "bugzilla-stage-slave-0"
    instance_class:             "" => "db.t1.micro"
    license_model:              "" => "<computed>"
    maintenance_window:         "" => "<computed>"
    monitoring_interval:        "" => "0"
    monitoring_role_arn:        "" => "<computed>"
    multi_az:                   "" => "<computed>"
    name:                       "" => "<computed>"
    option_group_name:          "" => "<computed>"
    parameter_group_name:       "" => "<computed>"
    port:                       "" => "<computed>"
    publicly_accessible:        "" => "<computed>"
    replicas.#:                 "" => "<computed>"
    replicate_source_db:        "" => "${aws_db_instance.database.id}"
    skip_final_snapshot:        "" => "true"
    status:                     "" => "<computed>"
    storage_type:               "" => "gp2"
    tags.#:                     "" => "3"
    tags.Environment:           "" => "stage"
    tags.Region:                "" => "us-west-2"
    tags.TechnicalOwner:        "" => "infra-aws@mozilla.com"
    username:                   "" => "<computed>"
    vpc_security_group_ids.#:   "" => "<computed>"
[0m
[0m[32m+ module.database.aws_db_subnet_group.database
[0m    arn:                 "" => "<computed>"
    description:         "" => "bugzilla-stage-rds-subnet-group"
    name:                "" => "bugzilla-stage-rds-subnet-group"
    subnet_ids.#:        "" => "<computed>"
    tags.#:              "" => "5"
    tags.Backup:         "" => "true"
    tags.Environment:    "" => "stage"
    tags.Region:         "" => "us-west-2"
    tags.Shutdown:       "" => "never"
    tags.TechnicalOwner: "" => "infra-aws@mozilla.com"
[0m
[0m[32m+ module.database.aws_security_group.database
[0m    description:                          "" => "Managed by Terraform"
    egress.#:                             "" => "1"
    egress.482069346.cidr_blocks.#:       "" => "1"
    egress.482069346.cidr_blocks.0:       "" => "0.0.0.0/0"
    egress.482069346.from_port:           "" => "0"
    egress.482069346.protocol:            "" => "-1"
    egress.482069346.security_groups.#:   "" => "0"
    egress.482069346.self:                "" => "false"
    egress.482069346.to_port:             "" => "0"
    ingress.#:                            "" => "1"
    ingress.~471043921.cidr_blocks.#:     "" => "0"
    ingress.~471043921.from_port:         "" => "3306"
    ingress.~471043921.protocol:          "" => "tcp"
    ingress.~471043921.security_groups.#: "" => "<computed>"
    ingress.~471043921.self:              "" => "false"
    ingress.~471043921.to_port:           "" => "3306"
    name:                                 "" => "<computed>"
    owner_id:                             "" => "<computed>"
    tags.#:                               "" => "6"
    tags.Backup:                          "" => "true"
    tags.Environment:                     "" => "stage"
    tags.Name:                            "" => "bugzilla-stage-rds"
    tags.Region:                          "" => "us-west-2"
    tags.Shutdown:                        "" => "never"
    tags.TechnicalOwner:                  "" => "infra-aws@mozilla.com"
    vpc_id:                               "" => "${module.info.vpc_id}"
[0m
[0m[32m+ module.database.template_file.password
[0m    rendered: "" => "<computed>"
    template: "" => "${password32}"
    vars.#:   "" => "<computed>"
[0m
[0m[32m+ module.database.tls_private_key.random
[0m    algorithm:          "" => "ECDSA"
    ecdsa_curve:        "" => "P224"
    private_key_pem:    "" => "<computed>"
    public_key_openssh: "" => "<computed>"
    public_key_pem:     "" => "<computed>"
    rsa_bits:           "" => "2048"
[0m
[0m[32m+ module.worker.aws_autoscaling_group.asg
[0m    availability_zones.#:                "" => "<computed>"
    default_cooldown:                    "" => "<computed>"
    desired_capacity:                    "" => "<computed>"
    enabled_metrics.#:                   "" => "8"
    enabled_metrics.119681000:           "" => "GroupStandbyInstances"
    enabled_metrics.1940933563:          "" => "GroupTotalInstances"
    enabled_metrics.308948767:           "" => "GroupPendingInstances"
    enabled_metrics.3267518000:          "" => "GroupTerminatingInstances"
    enabled_metrics.3394537085:          "" => "GroupDesiredCapacity"
    enabled_metrics.3551801763:          "" => "GroupInServiceInstances"
    enabled_metrics.4118539418:          "" => "GroupMinSize"
    enabled_metrics.4136111317:          "" => "GroupMaxSize"
    force_delete:                        "" => "false"
    health_check_grace_period:           "" => "300"
    health_check_type:                   "" => "ELB"
    launch_configuration:                "" => "${aws_launch_configuration.launch_config.id}"
    load_balancers.#:                    "" => "1"
    load_balancers.3654856471:           "" => "bugzilla-stage"
    max_size:                            "" => "5"
    metrics_granularity:                 "" => "1Minute"
    min_size:                            "" => "1"
    name:                                "" => "${var.service_name}-${var.environment}-${var.region}-asg (${var.purpose}) (LC ${aws_launch_configuration.launch_config.id})"
    tag.#:                               "" => "7"
    tag.1251645102.key:                  "" => "ServiceName"
    tag.1251645102.propagate_at_launch:  "" => "true"
    tag.1251645102.value:                "" => "bugzilla"
    tag.129950345.key:                   "" => "Shutdown"
    tag.129950345.propagate_at_launch:   "" => "true"
    tag.129950345.value:                 "" => "never"
    tag.1866895668.key:                  "" => "TechnicalOwner"
    tag.1866895668.propagate_at_launch:  "" => "true"
    tag.1866895668.value:                "" => "infra-aws@mozilla.com"
    tag.279281898.key:                   "" => "Environment"
    tag.279281898.propagate_at_launch:   "" => "true"
    tag.279281898.value:                 "" => "stage"
    tag.3966987438.key:                  "" => "Backup"
    tag.3966987438.propagate_at_launch:  "" => "true"
    tag.3966987438.value:                "" => "true"
    tag.4279558224.key:                  "" => "Region"
    tag.4279558224.propagate_at_launch:  "" => "true"
    tag.4279558224.value:                "" => "us-west-2"
    tag.~3569162900.key:                 "" => "Name"
    tag.~3569162900.propagate_at_launch: "" => "true"
    tag.~3569162900.value:               "" => "${var.service_name} (${var.purpose}) (${coalesce(var.nubis_version, module.info.nubis_version)}) for ${var.account} in ${var.environment}"
    vpc_zone_identifier.#:               "" => "<computed>"
    wait_for_capacity_timeout:           "" => "10m"
    wait_for_elb_capacity:               "" => "1"
[0m
[0m[32m+ module.worker.aws_autoscaling_policy.down
[0m    adjustment_type:        "" => "ChangeInCapacity"
    arn:                    "" => "<computed>"
    autoscaling_group_name: "" => "${var.service_name}-${var.environment}-${var.region}-asg (${var.purpose}) (LC ${aws_launch_configuration.launch_config.id})"
    cooldown:               "" => "60"
    name:                   "" => "bugzilla-stage-webserver-scaledown-asp"
    policy_type:            "" => "SimpleScaling"
    scaling_adjustment:     "" => "-1"
[0m
[0m[32m+ module.worker.aws_autoscaling_policy.up
[0m    adjustment_type:        "" => "ChangeInCapacity"
    arn:                    "" => "<computed>"
    autoscaling_group_name: "" => "${var.service_name}-${var.environment}-${var.region}-asg (${var.purpose}) (LC ${aws_launch_configuration.launch_config.id})"
    cooldown:               "" => "60"
    name:                   "" => "bugzilla-stage-webserver-scaleup-asp"
    policy_type:            "" => "SimpleScaling"
    scaling_adjustment:     "" => "1"
[0m
[0m[32m+ module.worker.aws_cloudwatch_metric_alarm.down
[0m    actions_enabled:                 "" => "true"
    alarm_actions.#:                 "" => "<computed>"
    alarm_description:               "" => "This metric monitor ec2 cpu utilization"
    alarm_name:                      "" => "bugzilla-stage-webserver-scaledown-alarm"
    comparison_operator:             "" => "LessThanOrEqualToThreshold"
    dimensions.#:                    "" => "1"
    dimensions.AutoScalingGroupName: "" => "${var.service_name}-${var.environment}-${var.region}-asg (${var.purpose}) (LC ${aws_launch_configuration.launch_config.id})"
    evaluation_periods:              "" => "2"
    metric_name:                     "" => "CPUUtilization"
    namespace:                       "" => "AWS/EC2"
    period:                          "" => "60"
    statistic:                       "" => "Average"
    threshold:                       "" => "20"
[0m
[0m[32m+ module.worker.aws_cloudwatch_metric_alarm.up
[0m    actions_enabled:                 "" => "true"
    alarm_actions.#:                 "" => "<computed>"
    alarm_description:               "" => "This metric monitor ec2 cpu utilization"
    alarm_name:                      "" => "bugzilla-stage-webserver-scaleup-alarm"
    comparison_operator:             "" => "GreaterThanOrEqualToThreshold"
    dimensions.#:                    "" => "1"
    dimensions.AutoScalingGroupName: "" => "${var.service_name}-${var.environment}-${var.region}-asg (${var.purpose}) (LC ${aws_launch_configuration.launch_config.id})"
    evaluation_periods:              "" => "2"
    metric_name:                     "" => "CPUUtilization"
    namespace:                       "" => "AWS/EC2"
    period:                          "" => "60"
    statistic:                       "" => "Average"
    threshold:                       "" => "50"
[0m
[0m[32m+ module.worker.aws_iam_instance_profile.extra
[0m    arn:             "" => "<computed>"
    create_date:     "" => "<computed>"
    name:            "" => "bugzilla-stage-us-west-2-webserver-profile"
    path:            "" => "/"
    roles.#:         "" => "1"
    roles.723337679: "" => "bugzilla-stage-us-west-2-webserver-role"
    unique_id:       "" => "<computed>"
[0m
[0m[32m+ module.worker.aws_iam_role.extra
[0m    arn:                "" => "<computed>"
    assume_role_policy: "" => "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Action\": \"sts:AssumeRole\",\n            \"Principal\": {\n               \"Service\": \"ec2.amazonaws.com\"\n            },\n            \"Effect\": \"Allow\",\n            \"Sid\": \"\"\n        }\n    ]\n}\n"
    name:               "" => "bugzilla-stage-us-west-2-webserver-role"
    path:               "" => "/"
    unique_id:          "" => "<computed>"
[0m
[0m[32m+ module.worker.aws_launch_configuration.launch_config
[0m    associate_public_ip_address: "" => "false"
    ebs_block_device.#:          "" => "<computed>"
    ebs_optimized:               "" => "<computed>"
    enable_monitoring:           "" => "true"
    iam_instance_profile:        "" => "bugzilla-stage-us-west-2-webserver-profile"
    image_id:                    "" => "ami-f8fd2498"
    instance_type:               "" => "t2.medium"
    key_name:                    "" => "nubis"
    name:                        "" => "<computed>"
    name_prefix:                 "" => "bugzilla-stage-us-west-2-webserver-"
    root_block_device.#:         "" => "<computed>"
    security_groups.#:           "" => "<computed>"
    user_data:                   "" => "cbde5513a6f551821684610116982ef8dda16445"
[0m
[0m[32m+ module.worker.aws_security_group.extra
[0m    description:                          "" => "Managed by Terraform"
    egress.#:                             "" => "1"
    egress.482069346.cidr_blocks.#:       "" => "1"
    egress.482069346.cidr_blocks.0:       "" => "0.0.0.0/0"
    egress.482069346.from_port:           "" => "0"
    egress.482069346.protocol:            "" => "-1"
    egress.482069346.security_groups.#:   "" => "0"
    egress.482069346.self:                "" => "false"
    egress.482069346.to_port:             "" => "0"
    ingress.#:                            "" => "2"
    ingress.2214680975.cidr_blocks.#:     "" => "1"
    ingress.2214680975.cidr_blocks.0:     "" => "0.0.0.0/0"
    ingress.2214680975.from_port:         "" => "80"
    ingress.2214680975.protocol:          "" => "tcp"
    ingress.2214680975.security_groups.#: "" => "0"
    ingress.2214680975.self:              "" => "false"
    ingress.2214680975.to_port:           "" => "80"
    ingress.2541437006.cidr_blocks.#:     "" => "1"
    ingress.2541437006.cidr_blocks.0:     "" => "0.0.0.0/0"
    ingress.2541437006.from_port:         "" => "22"
    ingress.2541437006.protocol:          "" => "tcp"
    ingress.2541437006.security_groups.#: "" => "0"
    ingress.2541437006.self:              "" => "false"
    ingress.2541437006.to_port:           "" => "22"
    name:                                 "" => "<computed>"
    owner_id:                             "" => "<computed>"
    tags.#:                               "" => "6"
    tags.Backup:                          "" => "true"
    tags.Environment:                     "" => "stage"
    tags.Name:                            "" => "bugzilla-stage-webserver"
    tags.Region:                          "" => "us-west-2"
    tags.Shutdown:                        "" => "never"
    tags.TechnicalOwner:                  "" => "infra-aws@mozilla.com"
    vpc_id:                               "" => "${module.info.vpc_id}"
[0m
[0m[32m+ module.worker.template_file.monitoring
[0m    rendered: "" => "<computed>"
    template: "" => "${ONE},${TWO}"
    vars.#:   "" => "<computed>"
[0m
[0m[32m+ module.worker.template_file.user_data
[0m    rendered:               "" => "<computed>"
    template:               "" => "NUBIS_ACCOUNT=\"${NUBIS_ACCOUNT}\"\nNUBIS_DOMAIN=\"${NUBIS_DOMAIN}\"\nNUBIS_ENVIRONMENT=\"${NUBIS_ENVIRONMENT}\"\nNUBIS_PROJECT=\"${NUBIS_PROJECT}\"\nNUBIS_PURPOSE=\"${NUBIS_PURPOSE}\"\nNUBIS_STACK=\"${NUBIS_STACK}\"\nNUBIS_MIGRATE=\"${NUBIS_MIGRATE}\"\nCONSUL_ACL_TOKEN=\"${CONSUL_ACL_TOKEN}\"\nNUBIS_SUDO_GROUPS=\"${NUBIS_SUDO_GROUPS}\"\nNUBIS_USER_GROUPS=\"${NUBIS_USER_GROUPS}\"\n"
    vars.#:                 "" => "10"
    vars.CONSUL_ACL_TOKEN:  "" => "anonymous"
    vars.NUBIS_ACCOUNT:     "" => "nubis-training-2016"
    vars.NUBIS_DOMAIN:      "" => "nubis.allizom.org"
    vars.NUBIS_ENVIRONMENT: "" => "stage"
    vars.NUBIS_MIGRATE:     "" => "1"
    vars.NUBIS_PROJECT:     "" => "bugzilla"
    vars.NUBIS_PURPOSE:     "" => "webserver"
    vars.NUBIS_STACK:       "" => "bugzilla-stage"
    vars.NUBIS_SUDO_GROUPS: "" => "nubis_global_admins"
    vars.NUBIS_USER_GROUPS: "" => ""
[0m
[0m[32m+ module.cache.info.terraform_remote_state.info
[0m    backend:        "" => "http"
    config.#:       "" => "1"
    config.address: "" => "http://state.nubis.nubis-training-2016.nubis.allizom.org/aws/us-west-2/stage.tfstate"
    output.#:       "" => "<computed>"
[0m
[0m[32m+ module.data.info.terraform_remote_state.info
[0m    backend:        "" => "http"
    config.#:       "" => "1"
    config.address: "" => "http://state.nubis.nubis-training-2016.nubis.allizom.org/aws/us-west-2/stage.tfstate"
    output.#:       "" => "<computed>"
[0m
[0m[32m+ module.queue-worker.aws_autoscaling_group.asg
[0m    availability_zones.#:                "" => "<computed>"
    default_cooldown:                    "" => "<computed>"
    desired_capacity:                    "" => "<computed>"
    enabled_metrics.#:                   "" => "8"
    enabled_metrics.119681000:           "" => "GroupStandbyInstances"
    enabled_metrics.1940933563:          "" => "GroupTotalInstances"
    enabled_metrics.308948767:           "" => "GroupPendingInstances"
    enabled_metrics.3267518000:          "" => "GroupTerminatingInstances"
    enabled_metrics.3394537085:          "" => "GroupDesiredCapacity"
    enabled_metrics.3551801763:          "" => "GroupInServiceInstances"
    enabled_metrics.4118539418:          "" => "GroupMinSize"
    enabled_metrics.4136111317:          "" => "GroupMaxSize"
    force_delete:                        "" => "false"
    health_check_grace_period:           "" => "300"
    health_check_type:                   "" => "ELB"
    launch_configuration:                "" => "${aws_launch_configuration.launch_config.id}"
    load_balancers.#:                    "" => "1"
    load_balancers.3654856471:           "" => "bugzilla-stage"
    max_size:                            "" => "5"
    metrics_granularity:                 "" => "1Minute"
    min_size:                            "" => "1"
    name:                                "" => "${var.service_name}-${var.environment}-${var.region}-asg (${var.purpose}) (LC ${aws_launch_configuration.launch_config.id})"
    tag.#:                               "" => "7"
    tag.1251645102.key:                  "" => "ServiceName"
    tag.1251645102.propagate_at_launch:  "" => "true"
    tag.1251645102.value:                "" => "bugzilla"
    tag.129950345.key:                   "" => "Shutdown"
    tag.129950345.propagate_at_launch:   "" => "true"
    tag.129950345.value:                 "" => "never"
    tag.1866895668.key:                  "" => "TechnicalOwner"
    tag.1866895668.propagate_at_launch:  "" => "true"
    tag.1866895668.value:                "" => "infra-aws@mozilla.com"
    tag.279281898.key:                   "" => "Environment"
    tag.279281898.propagate_at_launch:   "" => "true"
    tag.279281898.value:                 "" => "stage"
    tag.3966987438.key:                  "" => "Backup"
    tag.3966987438.propagate_at_launch:  "" => "true"
    tag.3966987438.value:                "" => "true"
    tag.4279558224.key:                  "" => "Region"
    tag.4279558224.propagate_at_launch:  "" => "true"
    tag.4279558224.value:                "" => "us-west-2"
    tag.~3569162900.key:                 "" => "Name"
    tag.~3569162900.propagate_at_launch: "" => "true"
    tag.~3569162900.value:               "" => "${var.service_name} (${var.purpose}) (${coalesce(var.nubis_version, module.info.nubis_version)}) for ${var.account} in ${var.environment}"
    vpc_zone_identifier.#:               "" => "<computed>"
    wait_for_capacity_timeout:           "" => "10m"
    wait_for_elb_capacity:               "" => "1"
[0m
[0m[32m+ module.queue-worker.aws_autoscaling_policy.down
[0m    adjustment_type:        "" => "ChangeInCapacity"
    arn:                    "" => "<computed>"
    autoscaling_group_name: "" => "${var.service_name}-${var.environment}-${var.region}-asg (${var.purpose}) (LC ${aws_launch_configuration.launch_config.id})"
    cooldown:               "" => "60"
    name:                   "" => "bugzilla-stage-queue-worker-scaledown-asp"
    policy_type:            "" => "SimpleScaling"
    scaling_adjustment:     "" => "-1"
[0m
[0m[32m+ module.queue-worker.aws_autoscaling_policy.up
[0m    adjustment_type:        "" => "ChangeInCapacity"
    arn:                    "" => "<computed>"
    autoscaling_group_name: "" => "${var.service_name}-${var.environment}-${var.region}-asg (${var.purpose}) (LC ${aws_launch_configuration.launch_config.id})"
    cooldown:               "" => "60"
    name:                   "" => "bugzilla-stage-queue-worker-scaleup-asp"
    policy_type:            "" => "SimpleScaling"
    scaling_adjustment:     "" => "1"
[0m
[0m[32m+ module.queue-worker.aws_cloudwatch_metric_alarm.down
[0m    actions_enabled:                 "" => "true"
    alarm_actions.#:                 "" => "<computed>"
    alarm_description:               "" => "This metric monitor ec2 cpu utilization"
    alarm_name:                      "" => "bugzilla-stage-queue-worker-scaledown-alarm"
    comparison_operator:             "" => "LessThanOrEqualToThreshold"
    dimensions.#:                    "" => "1"
    dimensions.AutoScalingGroupName: "" => "${var.service_name}-${var.environment}-${var.region}-asg (${var.purpose}) (LC ${aws_launch_configuration.launch_config.id})"
    evaluation_periods:              "" => "2"
    metric_name:                     "" => "CPUUtilization"
    namespace:                       "" => "AWS/EC2"
    period:                          "" => "60"
    statistic:                       "" => "Average"
    threshold:                       "" => "20"
[0m
[0m[32m+ module.queue-worker.aws_cloudwatch_metric_alarm.up
[0m    actions_enabled:                 "" => "true"
    alarm_actions.#:                 "" => "<computed>"
    alarm_description:               "" => "This metric monitor ec2 cpu utilization"
    alarm_name:                      "" => "bugzilla-stage-queue-worker-scaleup-alarm"
    comparison_operator:             "" => "GreaterThanOrEqualToThreshold"
    dimensions.#:                    "" => "1"
    dimensions.AutoScalingGroupName: "" => "${var.service_name}-${var.environment}-${var.region}-asg (${var.purpose}) (LC ${aws_launch_configuration.launch_config.id})"
    evaluation_periods:              "" => "2"
    metric_name:                     "" => "CPUUtilization"
    namespace:                       "" => "AWS/EC2"
    period:                          "" => "60"
    statistic:                       "" => "Average"
    threshold:                       "" => "50"
[0m
[0m[32m+ module.queue-worker.aws_iam_instance_profile.extra
[0m    arn:              "" => "<computed>"
    create_date:      "" => "<computed>"
    name:             "" => "bugzilla-stage-us-west-2-queue-worker-profile"
    path:             "" => "/"
    roles.#:          "" => "1"
    roles.3099592262: "" => "bugzilla-stage-us-west-2-queue-worker-role"
    unique_id:        "" => "<computed>"
[0m
[0m[32m+ module.queue-worker.aws_iam_role.extra
[0m    arn:                "" => "<computed>"
    assume_role_policy: "" => "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Action\": \"sts:AssumeRole\",\n            \"Principal\": {\n               \"Service\": \"ec2.amazonaws.com\"\n            },\n            \"Effect\": \"Allow\",\n            \"Sid\": \"\"\n        }\n    ]\n}\n"
    name:               "" => "bugzilla-stage-us-west-2-queue-worker-role"
    path:               "" => "/"
    unique_id:          "" => "<computed>"
[0m
[0m[32m+ module.queue-worker.aws_launch_configuration.launch_config
[0m    associate_public_ip_address: "" => "false"
    ebs_block_device.#:          "" => "<computed>"
    ebs_optimized:               "" => "<computed>"
    enable_monitoring:           "" => "true"
    iam_instance_profile:        "" => "bugzilla-stage-us-west-2-queue-worker-profile"
    image_id:                    "" => "ami-f8fd2498"
    instance_type:               "" => "t2.medium"
    key_name:                    "" => "nubis"
    name:                        "" => "<computed>"
    name_prefix:                 "" => "bugzilla-stage-us-west-2-queue-worker-"
    root_block_device.#:         "" => "<computed>"
    security_groups.#:           "" => "<computed>"
    user_data:                   "" => "cbde5513a6f551821684610116982ef8dda16445"
[0m
[0m[32m+ module.queue-worker.aws_security_group.extra
[0m    description:                          "" => "Managed by Terraform"
    egress.#:                             "" => "1"
    egress.482069346.cidr_blocks.#:       "" => "1"
    egress.482069346.cidr_blocks.0:       "" => "0.0.0.0/0"
    egress.482069346.from_port:           "" => "0"
    egress.482069346.protocol:            "" => "-1"
    egress.482069346.security_groups.#:   "" => "0"
    egress.482069346.self:                "" => "false"
    egress.482069346.to_port:             "" => "0"
    ingress.#:                            "" => "2"
    ingress.2214680975.cidr_blocks.#:     "" => "1"
    ingress.2214680975.cidr_blocks.0:     "" => "0.0.0.0/0"
    ingress.2214680975.from_port:         "" => "80"
    ingress.2214680975.protocol:          "" => "tcp"
    ingress.2214680975.security_groups.#: "" => "0"
    ingress.2214680975.self:              "" => "false"
    ingress.2214680975.to_port:           "" => "80"
    ingress.2541437006.cidr_blocks.#:     "" => "1"
    ingress.2541437006.cidr_blocks.0:     "" => "0.0.0.0/0"
    ingress.2541437006.from_port:         "" => "22"
    ingress.2541437006.protocol:          "" => "tcp"
    ingress.2541437006.security_groups.#: "" => "0"
    ingress.2541437006.self:              "" => "false"
    ingress.2541437006.to_port:           "" => "22"
    name:                                 "" => "<computed>"
    owner_id:                             "" => "<computed>"
    tags.#:                               "" => "6"
    tags.Backup:                          "" => "true"
    tags.Environment:                     "" => "stage"
    tags.Name:                            "" => "bugzilla-stage-queue-worker"
    tags.Region:                          "" => "us-west-2"
    tags.Shutdown:                        "" => "never"
    tags.TechnicalOwner:                  "" => "infra-aws@mozilla.com"
    vpc_id:                               "" => "${module.info.vpc_id}"
[0m
[0m[32m+ module.queue-worker.template_file.monitoring
[0m    rendered: "" => "<computed>"
    template: "" => "${ONE},${TWO}"
    vars.#:   "" => "<computed>"
[0m
[0m[32m+ module.queue-worker.template_file.user_data
[0m    rendered:               "" => "<computed>"
    template:               "" => "NUBIS_ACCOUNT=\"${NUBIS_ACCOUNT}\"\nNUBIS_DOMAIN=\"${NUBIS_DOMAIN}\"\nNUBIS_ENVIRONMENT=\"${NUBIS_ENVIRONMENT}\"\nNUBIS_PROJECT=\"${NUBIS_PROJECT}\"\nNUBIS_PURPOSE=\"${NUBIS_PURPOSE}\"\nNUBIS_STACK=\"${NUBIS_STACK}\"\nNUBIS_MIGRATE=\"${NUBIS_MIGRATE}\"\nCONSUL_ACL_TOKEN=\"${CONSUL_ACL_TOKEN}\"\nNUBIS_SUDO_GROUPS=\"${NUBIS_SUDO_GROUPS}\"\nNUBIS_USER_GROUPS=\"${NUBIS_USER_GROUPS}\"\n"
    vars.#:                 "" => "10"
    vars.CONSUL_ACL_TOKEN:  "" => "anonymous"
    vars.NUBIS_ACCOUNT:     "" => "nubis-training-2016"
    vars.NUBIS_DOMAIN:      "" => "nubis.allizom.org"
    vars.NUBIS_ENVIRONMENT: "" => "stage"
    vars.NUBIS_MIGRATE:     "" => "1"
    vars.NUBIS_PROJECT:     "" => "bugzilla"
    vars.NUBIS_PURPOSE:     "" => "queue-worker"
    vars.NUBIS_STACK:       "" => "bugzilla-stage"
    vars.NUBIS_SUDO_GROUPS: "" => "nubis_global_admins"
    vars.NUBIS_USER_GROUPS: "" => ""
[0m
[0m[32m+ module.worker.info.terraform_remote_state.info
[0m    backend:        "" => "http"
    config.#:       "" => "1"
    config.address: "" => "http://state.nubis.nubis-training-2016.nubis.allizom.org/aws/us-west-2/stage.tfstate"
    output.#:       "" => "<computed>"
[0m
[0m[32m+ module.push-worker.aws_autoscaling_group.asg
[0m    availability_zones.#:                "" => "<computed>"
    default_cooldown:                    "" => "<computed>"
    desired_capacity:                    "" => "<computed>"
    enabled_metrics.#:                   "" => "8"
    enabled_metrics.119681000:           "" => "GroupStandbyInstances"
    enabled_metrics.1940933563:          "" => "GroupTotalInstances"
    enabled_metrics.308948767:           "" => "GroupPendingInstances"
    enabled_metrics.3267518000:          "" => "GroupTerminatingInstances"
    enabled_metrics.3394537085:          "" => "GroupDesiredCapacity"
    enabled_metrics.3551801763:          "" => "GroupInServiceInstances"
    enabled_metrics.4118539418:          "" => "GroupMinSize"
    enabled_metrics.4136111317:          "" => "GroupMaxSize"
    force_delete:                        "" => "false"
    health_check_grace_period:           "" => "300"
    health_check_type:                   "" => "ELB"
    launch_configuration:                "" => "${aws_launch_configuration.launch_config.id}"
    load_balancers.#:                    "" => "1"
    load_balancers.3654856471:           "" => "bugzilla-stage"
    max_size:                            "" => "5"
    metrics_granularity:                 "" => "1Minute"
    min_size:                            "" => "1"
    name:                                "" => "${var.service_name}-${var.environment}-${var.region}-asg (${var.purpose}) (LC ${aws_launch_configuration.launch_config.id})"
    tag.#:                               "" => "7"
    tag.1251645102.key:                  "" => "ServiceName"
    tag.1251645102.propagate_at_launch:  "" => "true"
    tag.1251645102.value:                "" => "bugzilla"
    tag.129950345.key:                   "" => "Shutdown"
    tag.129950345.propagate_at_launch:   "" => "true"
    tag.129950345.value:                 "" => "never"
    tag.1866895668.key:                  "" => "TechnicalOwner"
    tag.1866895668.propagate_at_launch:  "" => "true"
    tag.1866895668.value:                "" => "infra-aws@mozilla.com"
    tag.279281898.key:                   "" => "Environment"
    tag.279281898.propagate_at_launch:   "" => "true"
    tag.279281898.value:                 "" => "stage"
    tag.3966987438.key:                  "" => "Backup"
    tag.3966987438.propagate_at_launch:  "" => "true"
    tag.3966987438.value:                "" => "true"
    tag.4279558224.key:                  "" => "Region"
    tag.4279558224.propagate_at_launch:  "" => "true"
    tag.4279558224.value:                "" => "us-west-2"
    tag.~3569162900.key:                 "" => "Name"
    tag.~3569162900.propagate_at_launch: "" => "true"
    tag.~3569162900.value:               "" => "${var.service_name} (${var.purpose}) (${coalesce(var.nubis_version, module.info.nubis_version)}) for ${var.account} in ${var.environment}"
    vpc_zone_identifier.#:               "" => "<computed>"
    wait_for_capacity_timeout:           "" => "10m"
    wait_for_elb_capacity:               "" => "1"
[0m
[0m[32m+ module.push-worker.aws_autoscaling_policy.down
[0m    adjustment_type:        "" => "ChangeInCapacity"
    arn:                    "" => "<computed>"
    autoscaling_group_name: "" => "${var.service_name}-${var.environment}-${var.region}-asg (${var.purpose}) (LC ${aws_launch_configuration.launch_config.id})"
    cooldown:               "" => "60"
    name:                   "" => "bugzilla-stage-push-worker-scaledown-asp"
    policy_type:            "" => "SimpleScaling"
    scaling_adjustment:     "" => "-1"
[0m
[0m[32m+ module.push-worker.aws_autoscaling_policy.up
[0m    adjustment_type:        "" => "ChangeInCapacity"
    arn:                    "" => "<computed>"
    autoscaling_group_name: "" => "${var.service_name}-${var.environment}-${var.region}-asg (${var.purpose}) (LC ${aws_launch_configuration.launch_config.id})"
    cooldown:               "" => "60"
    name:                   "" => "bugzilla-stage-push-worker-scaleup-asp"
    policy_type:            "" => "SimpleScaling"
    scaling_adjustment:     "" => "1"
[0m
[0m[32m+ module.push-worker.aws_cloudwatch_metric_alarm.down
[0m    actions_enabled:                 "" => "true"
    alarm_actions.#:                 "" => "<computed>"
    alarm_description:               "" => "This metric monitor ec2 cpu utilization"
    alarm_name:                      "" => "bugzilla-stage-push-worker-scaledown-alarm"
    comparison_operator:             "" => "LessThanOrEqualToThreshold"
    dimensions.#:                    "" => "1"
    dimensions.AutoScalingGroupName: "" => "${var.service_name}-${var.environment}-${var.region}-asg (${var.purpose}) (LC ${aws_launch_configuration.launch_config.id})"
    evaluation_periods:              "" => "2"
    metric_name:                     "" => "CPUUtilization"
    namespace:                       "" => "AWS/EC2"
    period:                          "" => "60"
    statistic:                       "" => "Average"
    threshold:                       "" => "20"
[0m
[0m[32m+ module.push-worker.aws_cloudwatch_metric_alarm.up
[0m    actions_enabled:                 "" => "true"
    alarm_actions.#:                 "" => "<computed>"
    alarm_description:               "" => "This metric monitor ec2 cpu utilization"
    alarm_name:                      "" => "bugzilla-stage-push-worker-scaleup-alarm"
    comparison_operator:             "" => "GreaterThanOrEqualToThreshold"
    dimensions.#:                    "" => "1"
    dimensions.AutoScalingGroupName: "" => "${var.service_name}-${var.environment}-${var.region}-asg (${var.purpose}) (LC ${aws_launch_configuration.launch_config.id})"
    evaluation_periods:              "" => "2"
    metric_name:                     "" => "CPUUtilization"
    namespace:                       "" => "AWS/EC2"
    period:                          "" => "60"
    statistic:                       "" => "Average"
    threshold:                       "" => "50"
[0m
[0m[32m+ module.push-worker.aws_iam_instance_profile.extra
[0m    arn:             "" => "<computed>"
    create_date:     "" => "<computed>"
    name:            "" => "bugzilla-stage-us-west-2-push-worker-profile"
    path:            "" => "/"
    roles.#:         "" => "1"
    roles.910739163: "" => "bugzilla-stage-us-west-2-push-worker-role"
    unique_id:       "" => "<computed>"
[0m
[0m[32m+ module.push-worker.aws_iam_role.extra
[0m    arn:                "" => "<computed>"
    assume_role_policy: "" => "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Action\": \"sts:AssumeRole\",\n            \"Principal\": {\n               \"Service\": \"ec2.amazonaws.com\"\n            },\n            \"Effect\": \"Allow\",\n            \"Sid\": \"\"\n        }\n    ]\n}\n"
    name:               "" => "bugzilla-stage-us-west-2-push-worker-role"
    path:               "" => "/"
    unique_id:          "" => "<computed>"
[0m
[0m[32m+ module.push-worker.aws_launch_configuration.launch_config
[0m    associate_public_ip_address: "" => "false"
    ebs_block_device.#:          "" => "<computed>"
    ebs_optimized:               "" => "<computed>"
    enable_monitoring:           "" => "true"
    iam_instance_profile:        "" => "bugzilla-stage-us-west-2-push-worker-profile"
    image_id:                    "" => "ami-f8fd2498"
    instance_type:               "" => "t2.medium"
    key_name:                    "" => "nubis"
    name:                        "" => "<computed>"
    name_prefix:                 "" => "bugzilla-stage-us-west-2-push-worker-"
    root_block_device.#:         "" => "<computed>"
    security_groups.#:           "" => "<computed>"
    user_data:                   "" => "cbde5513a6f551821684610116982ef8dda16445"
[0m
[0m[32m+ module.push-worker.aws_security_group.extra
[0m    description:                          "" => "Managed by Terraform"
    egress.#:                             "" => "1"
    egress.482069346.cidr_blocks.#:       "" => "1"
    egress.482069346.cidr_blocks.0:       "" => "0.0.0.0/0"
    egress.482069346.from_port:           "" => "0"
    egress.482069346.protocol:            "" => "-1"
    egress.482069346.security_groups.#:   "" => "0"
    egress.482069346.self:                "" => "false"
    egress.482069346.to_port:             "" => "0"
    ingress.#:                            "" => "2"
    ingress.2214680975.cidr_blocks.#:     "" => "1"
    ingress.2214680975.cidr_blocks.0:     "" => "0.0.0.0/0"
    ingress.2214680975.from_port:         "" => "80"
    ingress.2214680975.protocol:          "" => "tcp"
    ingress.2214680975.security_groups.#: "" => "0"
    ingress.2214680975.self:              "" => "false"
    ingress.2214680975.to_port:           "" => "80"
    ingress.2541437006.cidr_blocks.#:     "" => "1"
    ingress.2541437006.cidr_blocks.0:     "" => "0.0.0.0/0"
    ingress.2541437006.from_port:         "" => "22"
    ingress.2541437006.protocol:          "" => "tcp"
    ingress.2541437006.security_groups.#: "" => "0"
    ingress.2541437006.self:              "" => "false"
    ingress.2541437006.to_port:           "" => "22"
    name:                                 "" => "<computed>"
    owner_id:                             "" => "<computed>"
    tags.#:                               "" => "6"
    tags.Backup:                          "" => "true"
    tags.Environment:                     "" => "stage"
    tags.Name:                            "" => "bugzilla-stage-push-worker"
    tags.Region:                          "" => "us-west-2"
    tags.Shutdown:                        "" => "never"
    tags.TechnicalOwner:                  "" => "infra-aws@mozilla.com"
    vpc_id:                               "" => "${module.info.vpc_id}"
[0m
[0m[32m+ module.push-worker.template_file.monitoring
[0m    rendered: "" => "<computed>"
    template: "" => "${ONE},${TWO}"
    vars.#:   "" => "<computed>"
[0m
[0m[32m+ module.push-worker.template_file.user_data
[0m    rendered:               "" => "<computed>"
    template:               "" => "NUBIS_ACCOUNT=\"${NUBIS_ACCOUNT}\"\nNUBIS_DOMAIN=\"${NUBIS_DOMAIN}\"\nNUBIS_ENVIRONMENT=\"${NUBIS_ENVIRONMENT}\"\nNUBIS_PROJECT=\"${NUBIS_PROJECT}\"\nNUBIS_PURPOSE=\"${NUBIS_PURPOSE}\"\nNUBIS_STACK=\"${NUBIS_STACK}\"\nNUBIS_MIGRATE=\"${NUBIS_MIGRATE}\"\nCONSUL_ACL_TOKEN=\"${CONSUL_ACL_TOKEN}\"\nNUBIS_SUDO_GROUPS=\"${NUBIS_SUDO_GROUPS}\"\nNUBIS_USER_GROUPS=\"${NUBIS_USER_GROUPS}\"\n"
    vars.#:                 "" => "10"
    vars.CONSUL_ACL_TOKEN:  "" => "anonymous"
    vars.NUBIS_ACCOUNT:     "" => "nubis-training-2016"
    vars.NUBIS_DOMAIN:      "" => "nubis.allizom.org"
    vars.NUBIS_ENVIRONMENT: "" => "stage"
    vars.NUBIS_MIGRATE:     "" => "1"
    vars.NUBIS_PROJECT:     "" => "bugzilla"
    vars.NUBIS_PURPOSE:     "" => "push-worker"
    vars.NUBIS_STACK:       "" => "bugzilla-stage"
    vars.NUBIS_SUDO_GROUPS: "" => "nubis_global_admins"
    vars.NUBIS_USER_GROUPS: "" => ""
[0m
[0m[32m+ module.load_balancer.info.terraform_remote_state.info
[0m    backend:        "" => "http"
    config.#:       "" => "1"
    config.address: "" => "http://state.nubis.nubis-training-2016.nubis.allizom.org/aws/us-west-2/stage.tfstate"
    output.#:       "" => "<computed>"
[0m
[0m[32m+ module.attachments.info.terraform_remote_state.info
[0m    backend:        "" => "http"
    config.#:       "" => "1"
    config.address: "" => "http://state.nubis.nubis-training-2016.nubis.allizom.org/aws/us-west-2/stage.tfstate"
    output.#:       "" => "<computed>"
[0m
[0m[32m+ module.queue-worker.info.terraform_remote_state.info
[0m    backend:        "" => "http"
    config.#:       "" => "1"
    config.address: "" => "http://state.nubis.nubis-training-2016.nubis.allizom.org/aws/us-west-2/stage.tfstate"
    output.#:       "" => "<computed>"
[0m
[0m[32m+ module.push-worker.info.terraform_remote_state.info
[0m    backend:        "" => "http"
    config.#:       "" => "1"
    config.address: "" => "http://state.nubis.nubis-training-2016.nubis.allizom.org/aws/us-west-2/stage.tfstate"
    output.#:       "" => "<computed>"
[0m
[0m[32m+ module.dns.info.terraform_remote_state.info
[0m    backend:        "" => "http"
    config.#:       "" => "1"
    config.address: "" => "http://state.nubis.nubis-training-2016.nubis.allizom.org/aws/us-west-2/stage.tfstate"
    output.#:       "" => "<computed>"
[0m
[0m[32m+ module.database.info.terraform_remote_state.info
[0m    backend:        "" => "http"
    config.#:       "" => "1"
    config.address: "" => "http://state.nubis.nubis-training-2016.nubis.allizom.org/aws/us-west-2/stage.tfstate"
    output.#:       "" => "<computed>"
[0m
[0m[32m+ module.storage.info.terraform_remote_state.info
[0m    backend:        "" => "http"
    config.#:       "" => "1"
    config.address: "" => "http://state.nubis.nubis-training-2016.nubis.allizom.org/aws/us-west-2/stage.tfstate"
    output.#:       "" => "<computed>"
[0m
[0m[32m+ module.mail.info.terraform_remote_state.info
[0m    backend:        "" => "http"
    config.#:       "" => "1"
    config.address: "" => "http://state.nubis.nubis-training-2016.nubis.allizom.org/aws/us-west-2/stage.tfstate"
    output.#:       "" => "<computed>"
[0m
[0m[32m+ module.storage.aws_efs_file_system.storage
[0m    tags.#:              "0" => "4"
    tags.Environment:    "" => "stage"
    tags.Name:           "" => "bugzilla-stage-storage"
    tags.Region:         "" => "us-west-2"
    tags.TechnicalOwner: "" => "infra-aws@mozilla.com"
[0m
[0m[32m+ module.storage.aws_efs_mount_target.storage.0
[0m    file_system_id:       "" => "${aws_efs_file_system.storage.id}"
    ip_address:           "" => "<computed>"
    network_interface_id: "" => "<computed>"
    security_groups.#:    "" => "<computed>"
    subnet_id:            "" => "${element(split(\",\", module.info.private_subnets), count.index)}"
[0m
[0m[32m+ module.storage.aws_efs_mount_target.storage.1
[0m    file_system_id:       "" => "${aws_efs_file_system.storage.id}"
    ip_address:           "" => "<computed>"
    network_interface_id: "" => "<computed>"
    security_groups.#:    "" => "<computed>"
    subnet_id:            "" => "${element(split(\",\", module.info.private_subnets), count.index)}"
[0m
[0m[32m+ module.storage.aws_efs_mount_target.storage.2
[0m    file_system_id:       "" => "${aws_efs_file_system.storage.id}"
    ip_address:           "" => "<computed>"
    network_interface_id: "" => "<computed>"
    security_groups.#:    "" => "<computed>"
    subnet_id:            "" => "${element(split(\",\", module.info.private_subnets), count.index)}"
[0m
[0m[32m+ module.storage.aws_security_group.storage
[0m    description:                           "" => "Managed by Terraform"
    egress.#:                              "" => "1"
    egress.482069346.cidr_blocks.#:        "" => "1"
    egress.482069346.cidr_blocks.0:        "" => "0.0.0.0/0"
    egress.482069346.from_port:            "" => "0"
    egress.482069346.protocol:             "" => "-1"
    egress.482069346.security_groups.#:    "" => "0"
    egress.482069346.self:                 "" => "false"
    egress.482069346.to_port:              "" => "0"
    ingress.#:                             "" => "1"
    ingress.~1623186873.cidr_blocks.#:     "" => "0"
    ingress.~1623186873.from_port:         "" => "2049"
    ingress.~1623186873.protocol:          "" => "tcp"
    ingress.~1623186873.security_groups.#: "" => "<computed>"
    ingress.~1623186873.self:              "" => "false"
    ingress.~1623186873.to_port:           "" => "2049"
    name:                                  "" => "<computed>"
    owner_id:                              "" => "<computed>"
    tags.#:                                "" => "4"
    tags.Environment:                      "" => "stage"
    tags.Name:                             "" => "bugzilla-stage-efs"
    tags.Region:                           "" => "us-west-2"
    tags.TechnicalOwner:                   "" => "infra-aws@mozilla.com"
    vpc_id:                                "" => "${module.info.vpc_id}"
[0m
[0m[32m+ module.storage.consul_keys.config
[0m    datacenter:              "" => "<computed>"
    key.#:                   "" => "1"
    key.~2677824317.default: "" => ""
    key.~2677824317.delete:  "" => "true"
    key.~2677824317.name:    "" => "fsid"
    key.~2677824317.path:    "" => "bugzilla-stage/stage/config/storage/bugzilla/fsid"
    key.~2677824317.value:   "" => "${aws_efs_file_system.storage.id}"
    var.#:                   "" => "<computed>"
[0m
[0m[32m+ module.cache.aws_elasticache_cluster.cache
[0m    apply_immediately:      "" => "true"
    availability_zone:      "" => "<computed>"
    az_mode:                "" => "<computed>"
    cache_nodes.#:          "" => "<computed>"
    cluster_id:             "" => "bugzilla-stage"
    configuration_endpoint: "" => "<computed>"
    engine:                 "" => "memcached"
    engine_version:         "" => "<computed>"
    maintenance_window:     "" => "<computed>"
    node_type:              "" => "cache.t2.micro"
    num_cache_nodes:        "" => "1"
    parameter_group_name:   "" => "<computed>"
    port:                   "" => "11211"
    security_group_ids.#:   "" => "<computed>"
    security_group_names.#: "" => "<computed>"
    snapshot_window:        "" => "<computed>"
    subnet_group_name:      "" => "bugzilla-stage-cache-subnetgroup"
    tags.#:                 "" => "4"
    tags.Environment:       "" => "stage"
    tags.Name:              "" => "bugzilla-stage"
    tags.Region:            "" => "us-west-2"
    tags.TechnicalOwner:    "" => "infra-aws@mozilla.com"
[0m
[0m[32m+ module.cache.aws_elasticache_subnet_group.clients
[0m    description:  "" => "Subnet Group for Cache bugzilla-stage"
    name:         "" => "bugzilla-stage-cache-subnetgroup"
    subnet_ids.#: "" => "<computed>"
[0m
[0m[32m+ module.cache.aws_security_group.clients
[0m    description:                           "" => "Managed by Terraform"
    egress.#:                              "" => "1"
    egress.482069346.cidr_blocks.#:        "" => "1"
    egress.482069346.cidr_blocks.0:        "" => "0.0.0.0/0"
    egress.482069346.from_port:            "" => "0"
    egress.482069346.protocol:             "" => "-1"
    egress.482069346.security_groups.#:    "" => "0"
    egress.482069346.self:                 "" => "false"
    egress.482069346.to_port:              "" => "0"
    ingress.#:                             "" => "1"
    ingress.~1333864030.cidr_blocks.#:     "" => "0"
    ingress.~1333864030.from_port:         "" => "11211"
    ingress.~1333864030.protocol:          "" => "tcp"
    ingress.~1333864030.security_groups.#: "" => "<computed>"
    ingress.~1333864030.self:              "" => "false"
    ingress.~1333864030.to_port:           "" => "11211"
    name:                                  "" => "<computed>"
    owner_id:                              "" => "<computed>"
    tags.#:                                "" => "4"
    tags.Environment:                      "" => "stage"
    tags.Name:                             "" => "bugzilla-stage-elasticache"
    tags.Region:                           "" => "us-west-2"
    tags.TechnicalOwner:                   "" => "infra-aws@mozilla.com"
    vpc_id:                                "" => "${module.info.vpc_id}"
[0m
[0m[32m+ module.load_balancer.aws_elb.load_balancer
[0m    availability_zones.#:                   "" => "<computed>"
    connection_draining:                    "" => "true"
    connection_draining_timeout:            "" => "60"
    cross_zone_load_balancing:              "" => "true"
    dns_name:                               "" => "<computed>"
    health_check.#:                         "" => "1"
    health_check.0.healthy_threshold:       "" => "2"
    health_check.0.interval:                "" => "30"
    health_check.0.target:                  "" => "HTTP:80/robots.txt?no-ssl-rewrite&elb-health-check"
    health_check.0.timeout:                 "" => "3"
    health_check.0.unhealthy_threshold:     "" => "2"
    idle_timeout:                           "" => "60"
    instances.#:                            "" => "<computed>"
    internal:                               "" => "<computed>"
    listener.#:                             "" => "2"
    listener.3057123346.instance_port:      "" => "80"
    listener.3057123346.instance_protocol:  "" => "http"
    listener.3057123346.lb_port:            "" => "80"
    listener.3057123346.lb_protocol:        "" => "http"
    listener.3057123346.ssl_certificate_id: "" => ""
    listener.~35814492.instance_port:       "" => "80"
    listener.~35814492.instance_protocol:   "" => "http"
    listener.~35814492.lb_port:             "" => "443"
    listener.~35814492.lb_protocol:         "" => "https"
    listener.~35814492.ssl_certificate_id:  "" => "${element(split(\",\",template_file.ssl_cert_id.rendered), signum(length(var.ssl_cert_name_prefix)))}"
    name:                                   "" => "bugzilla-stage"
    security_groups.#:                      "" => "<computed>"
    source_security_group:                  "" => "<computed>"
    source_security_group_id:               "" => "<computed>"
    subnets.#:                              "" => "<computed>"
    tags.#:                                 "" => "6"
    tags.Backup:                            "" => "true"
    tags.Environment:                       "" => "stage"
    tags.Name:                              "" => "bugzilla-stage"
    tags.Region:                            "" => "us-west-2"
    tags.Shutdown:                          "" => "never"
    tags.TechnicalOwner:                    "" => "infra-aws@mozilla.com"
    zone_id:                                "" => "<computed>"
[0m
[0m[32m+ module.load_balancer.aws_security_group.load_balancer
[0m    description:                          "" => "Managed by Terraform"
    egress.#:                             "" => "1"
    egress.482069346.cidr_blocks.#:       "" => "1"
    egress.482069346.cidr_blocks.0:       "" => "0.0.0.0/0"
    egress.482069346.from_port:           "" => "0"
    egress.482069346.protocol:            "" => "-1"
    egress.482069346.security_groups.#:   "" => "0"
    egress.482069346.self:                "" => "false"
    egress.482069346.to_port:             "" => "0"
    ingress.#:                            "" => "2"
    ingress.2214680975.cidr_blocks.#:     "" => "1"
    ingress.2214680975.cidr_blocks.0:     "" => "0.0.0.0/0"
    ingress.2214680975.from_port:         "" => "80"
    ingress.2214680975.protocol:          "" => "tcp"
    ingress.2214680975.security_groups.#: "" => "0"
    ingress.2214680975.self:              "" => "false"
    ingress.2214680975.to_port:           "" => "80"
    ingress.2617001939.cidr_blocks.#:     "" => "1"
    ingress.2617001939.cidr_blocks.0:     "" => "0.0.0.0/0"
    ingress.2617001939.from_port:         "" => "443"
    ingress.2617001939.protocol:          "" => "tcp"
    ingress.2617001939.security_groups.#: "" => "0"
    ingress.2617001939.self:              "" => "false"
    ingress.2617001939.to_port:           "" => "443"
    name:                                 "" => "<computed>"
    owner_id:                             "" => "<computed>"
    tags.#:                               "" => "6"
    tags.Backup:                          "" => "true"
    tags.Environment:                     "" => "stage"
    tags.Name:                            "" => "bugzilla-stage"
    tags.Region:                          "" => "us-west-2"
    tags.Shutdown:                        "" => "never"
    tags.TechnicalOwner:                  "" => "infra-aws@mozilla.com"
    vpc_id:                               "" => "${module.info.vpc_id}"
[0m
[0m[32m+ module.load_balancer.template_file.ssl_cert_id
[0m    rendered: "" => "<computed>"
    template: "" => "${ONE},${TWO}"
    vars.#:   "" => "<computed>"
[0m
[0m[32m+ module.mail.aws_iam_access_key.email
[0m    secret:            "" => "<computed>"
    ses_smtp_password: "" => "<computed>"
    status:            "" => "<computed>"
    user:              "" => "bugzilla-stage-ses"
[0m
[0m[32m+ module.mail.aws_iam_user.email
[0m    arn:       "" => "<computed>"
    name:      "" => "bugzilla-stage-ses"
    path:      "" => "/"
    unique_id: "" => "<computed>"
[0m
[0m[32m+ module.mail.aws_iam_user_policy.email
[0m    name:   "" => "bugzilla-stage-ses-policy"
    policy: "" => "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n       \"Effect\": \"Allow\",\n       \"Action\": [\"ses:SendEmail\", \"ses:SendRawEmail\"],\n       \"Resource\":\"*\"\n     }\n  ]\n}\n"
    user:   "" => "bugzilla-stage-ses"
[0m
[0m[32m+ module.dns.aws_route53_record.primary
[0m    fqdn:      "" => "<computed>"
    name:      "" => "www.bugzilla-stage.stage"
    records.#: "" => "<computed>"
    ttl:       "" => "300"
    type:      "" => "CNAME"
    weight:    "" => "-1"
    zone_id:   "" => "${module.info.hosted_zone_id}"
[0m
[0m
[0m[1mPlan:[0m 75 to add, 0 to change, 0 to destroy.[0m
